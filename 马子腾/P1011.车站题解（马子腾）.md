## [P1011.车站（洛谷）](https://www.luogu.com.cn/problem/P1011)

### 题目描述

火车从始发站（称为第 $1$ 站）开出，在始发站上车的人数为 $a$，然后到达第 $2$ 站，在第 $2$ 站有人上、下车，但上、下车的人数相同，因此在第 $2$ 站开出时（即在到达第 $3$ 站之前）车上的人数保持为 $a$ 人。从第 $3$ 站起（包括第 $3$ 站）上、下车的人数有一定规律：上车的人数都是前两站上车人数之和，而下车人数等于上一站上车人数，一直到终点站的前一站（第 $n-1$ 站），都满足此规律。现给出的条件是：共有 $n$ 个车站，始发站上车的人数为 $a$，最后一站下车的人数是 $m$（全部下车）。试问 $x$ 站开出时车上的人数是多少？

### 输入格式

输入只有一行四个整数，分别表示始发站上车人数 $a$，车站数 $n$，终点站下车人数 $m$ 和所求的站点编号 $x$。

### 输出格式

输出一行一个整数表示答案：从 $x$ 站开出时车上的人数。

### 样例 #1

#### 样例输入 #1

```
5 7 32 4
```

#### 样例输出 #1

```
13
```

### 提示

对于全部的测试点，保证 $1 \leq a \leq 20$，$1 \leq x \leq n \leq 20$，$1 \leq m \leq 2 \times 10^4$。

### 思路
- 分析并列表格(设第一站上车人数为a，第二站上车人数为b，则第二站下车人数也为b)
  
|车站|1 |2|3|4|5|6|
|-----|---|---|-|-|-|-|
|上车人数    | a | b |a+b|a+2b|2a+3b|0|
|下车人数    |  0  | b   |b|a+b|a+2b|3a+2b|
|该车站总人数|  a|a  |2a|2a+b|3a+2b|0|
- 通过列表格得出，当前站为第5站时，3a+2b=m（终点站下车人数），现在就要想办法求出a前的系数和b前的系数。
- 观察上车表格最后一行，可观察得到，每一站总人数a前系数等于前两列a前系数相加再+1，每一站总人数b前系数等于前两列b前系数相加再-1,故可由此列等式：
某站总人数a前系数：sum1[i] = sum1[i-1] + sum1[i-2]-1;
某站总人数b前系数：sum2[i] = sum2[i-1] + sum2[i-2]+1;
- 则终点站下车人数 m = a*sum1[i-1] + b*sum2[i-1];
- 可推导出 b = (m-a*sum1[i-1])/ sum2[i-1];(核心公式)
- 则x站开出时车上的人数为
  a*sum1[x] + b*sum2[x];


```
#include<stdio.h>
int main()
{
	int a, b, n, m, x;//输入
	int sum1[23],sum2[23];//定义a和b前系数的数组
	scanf("%d %d %d %d", &a, &n, &m, &x);
	sum1[1] = 1, sum1[2] = 1, sum1[3] = 2;//根据表格填写
	for (int i = 4; i <= n - 1; i++)//从4开始，前面没有规律，一直到终点站前一站
	{
		sum1[i] = sum1[i - 1] + sum1[i - 2] - 1;
		sum2[i] = sum2[i - 1] + sum2[i - 2] + 1;
	}
	b = (m - a * sum1[n - 1]) / sum2[n - 1];
	printf("%d", a * sum1[x] + b * sum2[x]);//输出x站开出时车上人数
	return 0;
}
```
（但是有一个测试点未通过）
[![pFqmHD1.png](https://s21.ax1x.com/2024/04/06/pFqmHD1.png)](https://imgse.com/i/pFqmHD1)